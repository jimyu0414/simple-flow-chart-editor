{"ast":null,"code":"var _jsxFileName = \"/Users/yu/Desktop/flow-chart/client/src/App.js\";\nimport React from 'react';\nimport './App.scss';\nimport DragPanel from './Components/DragPanel';\nimport MenuPanel from './Components/MenuPanel';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.handleMenuShapeClick = shape => {\n      const uuidv1 = require('uuid/v1');\n\n      let newShape = {\n        id: uuidv1(),\n        shape: shape,\n        name: \"defult\",\n        positionx: \"0\",\n        positiony: \"0\"\n      };\n      this.globalShapes.concat(newShape);\n      console.log(this.globalShapes);\n      this.setState({\n        shapes: this.state.shapes.concat(newShape)\n      });\n    };\n\n    this.handleJsonExport = () => {\n      const res = fetch('/api/exportshapes', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.shapes)\n      });\n      console.log(res);\n    };\n\n    this.handleShapeNameChange = (newName, id) => {\n      console.log('name change');\n      let shapes = this.state.shapes;\n      shapes.forEach(function (shape) {\n        if (shape.id === id) {\n          shape.name = newName;\n        }\n      });\n      this.setState({\n        shapes: shapes\n      });\n      console.log(this.state.shapes);\n    };\n\n    this.handleShapePosition = (id, x, y) => {\n      console.log('handleShapePosition'); //check if there is new one\n\n      if (this.globalShapes.length !== this.state.shapes.length) {}\n\n      let shapes = this.state.shapes;\n      shapes.forEach(function (shape) {\n        if (shape.id === id) {\n          shape.positionx = x;\n          shape.positiony = y;\n        }\n      });\n      console.log(this.globalShapes);\n    };\n\n    this.globalShapes = [];\n    this.state = {\n      shapes: []\n    }; //this.handleLoadingChart = this.handleLoadingChart.bind(this);\n  } //load from json file\n\n\n  componentDidMount() {\n    // fetch('/api/shapes')\n    //   .then(res => res.json())\n    //   .then(shapes => this.setState({shapes},()=>console.log(shapes)));\n    //   this.globalShape = this.state.shapes;\n    fetch('/api/shapes').then(res => res.json()).then(shapes => this.setState({\n      shapes\n    }, () => console.log(shapes)));\n  } //add new shape to drag pannel\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Simple Flow Chart Editor\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"( Click to add a shape from left menu )\"), React.createElement(\"button\", {\n      className: \"btn__get-chart\",\n      onClick: this.handleLoadingChart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"LAST EXPORTED JSON CHART\"), React.createElement(\"button\", {\n      onClick: this.handleJsonExport,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"EXPORT JSON\")), React.createElement(MenuPanel, {\n      addShape: this.handleMenuShapeClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(DragPanel, {\n      shapes: this.state.shapes,\n      handleShapePosition: this.handleShapePosition,\n      changeShapeName: this.handleShapeNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/yu/Desktop/flow-chart/client/src/App.js"],"names":["React","DragPanel","MenuPanel","App","Component","constructor","handleMenuShapeClick","shape","uuidv1","require","newShape","id","name","positionx","positiony","globalShapes","concat","console","log","setState","shapes","state","handleJsonExport","res","fetch","method","headers","body","JSON","stringify","handleShapeNameChange","newName","forEach","handleShapePosition","x","y","length","componentDidMount","then","json","render","handleLoadingChart"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.scss';\nimport DragPanel from './Components/DragPanel';\nimport MenuPanel from './Components/MenuPanel';\n\nclass App extends React.Component {\nconstructor(){\n  super();\n  this.globalShapes=[];\n  this.state={\n    shapes:[]\n  }\n //this.handleLoadingChart = this.handleLoadingChart.bind(this);\n}\n\n\n  //load from json file\n  componentDidMount() {\n    // fetch('/api/shapes')\n    //   .then(res => res.json())\n    //   .then(shapes => this.setState({shapes},()=>console.log(shapes)));\n    //   this.globalShape = this.state.shapes;\n    fetch('/api/shapes')\n      .then(res => res.json())\n      .then(shapes => this.setState({shapes},()=>console.log(shapes)));\n\n  }\n\n  //add new shape to drag pannel\n  handleMenuShapeClick = (shape) =>{\n    const uuidv1 = require('uuid/v1');\n    let newShape = {\n      id: uuidv1(),\n      shape: shape,\n      name:\"defult\",\n      positionx:\"0\",\n      positiony:\"0\"\n    }\n    this.globalShapes.concat(newShape);\n    console.log(this.globalShapes);\n    this.setState({\n      shapes: this.state.shapes.concat(newShape)\n    })\n\n  }\n\n  //export to json file\n  handleJsonExport = () => {\n\n  const res =  fetch('/api/exportshapes', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(this.state.shapes)\n  });\n\n  console.log(res);\n  }\n\n\n  //handleShapeNameChange\n  handleShapeNameChange = (newName, id) =>{\n    console.log('name change');\n    let shapes = this.state.shapes;\n    shapes.forEach(function(shape) {\n      if (shape.id === id) {\n        shape.name = newName;\n      }\n    });\n    this.setState({\n        shapes: shapes\n    }\n    )\n    console.log(this.state.shapes)\n  }\n\n  //update pictular shape position\n  handleShapePosition = (id,x,y) =>{\n      console.log('handleShapePosition');\n      //check if there is new one\n      if (this.globalShapes.length !== this.state.shapes.length){\n        \n      }\n\n      let shapes = this.state.shapes;\n      shapes.forEach(function(shape) {\n        if (shape.id === id) {\n          shape.positionx = x;\n          shape.positiony = y;\n        }\n      });\n    console.log(this.globalShapes);\n  }\n\n\n  render(){\n    return(\n      <div className=\"app\">\n    <div className=\"app__header\">\n    <h1>Simple Flow Chart Editor</h1>\n    <p>( Click to add a shape from left menu )</p>\n    <button className=\"btn__get-chart\" onClick={this.handleLoadingChart}>LAST EXPORTED JSON CHART</button>\n    <button onClick={this.handleJsonExport}>EXPORT JSON</button>\n    </div>\n      <MenuPanel\n        addShape = {this.handleMenuShapeClick}\n      />\n      <DragPanel\n        shapes = {this.state.shapes}\n        handleShapePosition = {this.handleShapePosition}\n        changeShapeName = {this.handleShapeNameChange}\n      />\n    </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}